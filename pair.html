 <!DOCTYPE html>
 <html lang="en">
 <head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>PAIR CODE</title>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
   <style>
     body {
       display: flex;
       justify-content: center;
       align-items: center;
       height: 100vh;
       margin: 0;
       background-color: #1a1a1a; /* Dark background */
       background-repeat: no-repeat;
       background-position: center;
       background-size: cover;
       font-family: 'Roboto Mono', monospace; /* Cool monospace font */
       color: #eee; /* Light text */
       overflow: hidden; /* Hide potential scrollbars from animations */
       flex-direction: column; /* Center items vertically */
     }

     .container {
       display: flex;
       flex-direction: column;
       align-items: center;
     }

     .box {
       width: 320px; /* Slightly smaller box */
       padding: 30px; /* Adjusted padding */
       position: relative;
       text-align: center;
       background-color: #222; /* Darker box */
       border-radius: 15px; /* Rounded corners */
       box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); /* Deeper shadow */
       border: 1px solid #333; /* Dark border */
       animation: fadeIn 0.5s ease-out; /* Initial fade-in */
       margin-bottom: 20px; /* Space for bot name */
     }

     @keyframes fadeIn {
       from { opacity: 0; transform: translateY(-20px); }
       to { opacity: 1; transform: translateY(0); }
     }

     #text {
       color: #eee;
     }

     .input-container input {
       color: #ccc;
     }

     .centered-text {
       color: #00bcd4; /* Cyan heading */
       font-size: 1.8em; /* Slightly smaller heading */
       margin-bottom: 15px;
       font-weight: bold;
       letter-spacing: 0.05em;
       text-shadow: 0 0 8px rgba(0, 188, 212, 0.5); /* Glow effect */
     }

     h6 {
       color: #999; /* Medium gray subheading */
       margin-bottom: 20px;
       font-size: 1em;
     }

     .input-container {
       display: flex;
       background: #333; /* Dark input background */
       border-radius: 8px;
       padding: 0.2rem;
       gap: 0.2rem;
       max-width: 280px; /* Smaller input */
       width: 100%;
       border: 1px solid #444;
       overflow: hidden; /* Clip inner elements for animation */
     }

     .input-container input {
       border-radius: 8px 0 0 8px;
       background: #444; /* Darker input field */
       width: 70%; /* Smaller input width */
       flex-basis: 70%;
       padding: 1rem; /* Adjusted padding */
       border: none;
       border-left: 3px solid #00bcd4; /* Cyan accent border */
       color: #eee;
       transition: border-left 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
       font-size: 0.9em;
     }

     .input-container input:focus {
       border-left: 3px solid #00ffc6; /* Brighter cyan focus */
       outline: none;
       box-shadow: 0 0 8px rgba(0, 255, 198, 0.3); /* Focus glow */
     }

     .input-container button {
       flex-basis: 30%; /* Adjusted button width */
       padding: 0.8rem 0.5rem; /* Smaller button padding */
       background: #00bcd4; /* Cyan button */
       font-weight: bold;
       letter-spacing: 0.05em;
       text-transform: uppercase;
       color: #222; /* Dark button text */
       border: none;
       width: 100%;
       border-radius: 0 8px 8px 0;
       transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out, transform 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
       cursor: pointer;
       font-size: 0.8em; /* Smaller button text */
       overflow: hidden; /* Clip ripple effect */
       position: relative;
       transform-origin: center;
     }

     .input-container button:hover {
       background: #00ffc6; /* Brighter cyan hover */
       color: #111;
       transform: scale(1.1); /* Scale up on hover */
     }

     .input-container button::before {
       content: '';
       position: absolute;
       top: 50%;
       left: 50%;
       width: 0;
       height: 0;
       background-color: rgba(255, 255, 255, 0.3);
       border-radius: 50%;
       transform: translate(-50%, -50%);
       opacity: 0;
       transition: width 0.3s ease-out, height 0.3s ease-out, opacity 0.3s ease-out;
     }

     .input-container button:active::before {
       width: 150%;
       height: 150%;
       opacity: 1;
       transition-duration: 0.2s;
     }

     #waiting-message {
       color: #999;
       margin-top: 15px;
     }

     @media (max-width: 500px) {
       .input-container {
         flex-direction: column;
       }

       .input-container input {
         border-radius: 8px;
         width: 100%;
         flex-basis: auto;
       }

       .input-container button {
         border-radius: 8px;
         width: 100%;
         flex-basis: auto;
       }
     }

     .centered-text {
       text-align: center;
     }

     #loading-spinner {
       display: none;
       color: #00bcd4; /* Cyan spinner */
       margin-top: 15px;
     }

     .fa-spinner {
       animation: spin 1s linear infinite; /* Faster spin */
     }

     @keyframes spin {
       0% {
         transform: rotate(0deg);
       }

       100% {
         transform: rotate(360deg);
       }
     }

     .error-message {
       color: #ff6b6b; /* Red error */
       font-weight: bold;
       margin-top: 15px;
       text-shadow: 0 0 5px rgba(255, 107, 107, 0.5); /* Error glow */
     }

     #copy {
       color: #ffeb3b; /* Yellow code color */
       font-weight: bold;
       font-size: 1.2em;
       cursor: pointer;
       text-shadow: 0 0 5px rgba(255, 235, 59, 0.5); /* Code glow */
       transition: transform 0.2s ease-in-out;
       display: inline-block; /* For transform */
     }

     #copy:hover {
       transform: scale(1.05);
     }

     #copy span {
       color: #eee;
     }

     #copy.copied {
       color: #4caf50; /* Green copied */
       animation: pulse 1s ease-in-out infinite alternate;
     }

     @keyframes pulse {
       from { transform: scale(1); }
       to { transform: scale(1.1); }
     }

     /* Background animation */
     .bg-animation {
       position: absolute;
       top: 0;
       left: 0;
       width: 100%;
       height: 100%;
       pointer-events: none; /* Allow clicks through */
       z-index: -1;
     }

     .bg-animation span {
       position: absolute;
       border-radius: 50%;
       background: linear-gradient(to bottom right, #00bcd4, #00ffc6);
       animation: animate 3s linear infinite;
       opacity: 0;
     }

     @keyframes animate {
       0% {
         transform: translateY(0) scale(0);
         opacity: 0;
       }
       50% {
         opacity: 1;
       }
       100% {
         transform: translateY(-120vh) scale(1);
         opacity: 0;
       }
     }

     .bot-name {
       color: #777;
       font-size: 0.9em;
       margin-top: 5px;
     }
   </style>
   <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
 </head>

 <body>
   <div class="bg-animation">
     </div>
   <div class="container">
     <div class="main">
       <div class="box" id="box">
         <div id="text">
           <i class="fa fa-user fa-2x" style="margin-bottom: 15px; color: #00bcd4;"></i>
           <p>
             <h3 class="centered-text">Link with WhatsApp number</h3>
             <br>
             <h6><span style="font-weight: bold;">Enter your WhatsApp number</span> with country code.</h6>
             <div class="input-container">
               <input placeholder="+234XXXXXXXX" type="number" id="number"
                 placeholder="Enter your phone number with country code‼️" name="">
               <button id="submit">Pair</button>
             </div>
             <div id="loading-spinner">
               <i class="fas fa-spinner fa-spin fa-lg"></i>
             </div>
             <br>
             <br>
             <main id="pair"></main>
           </p>
         </div>
       </div>
     </div>
     <p class="bot-name">TECBROS-MD</p>
   </div>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js"></script>
   <script>
     const bgAnimation = document.querySelector('.bg-animation');
     const numberOfCircles = 20; // Adjust for more/fewer circles

     for (let i = 0; i < numberOfCircles; i++) {
       const span = document.createElement('span');
       const size = Math.random() * 50;
       span.style.width = size + 'px';
       span.style.height = size + 'px';
       span.style.left = Math.random() * window.innerWidth + 'px';
       span.style.top = Math.random() * window.innerHeight + 'px';
       span.style.animationDelay = Math.random() * 2 + 's';
       bgAnimation.appendChild(span);
     }

     let pairElement = document.getElementById("pair");
     let submitButton = document.getElementById("submit");
     let numberInput = document.getElementById("number");
     let boxElement = document.getElementById("box");
     let copyElement;

     async function Copy() {
       if (!copyElement) return;

       let text = copyElement.innerText;
       try {
         await navigator.clipboard.writeText(copyElement.innerText.replace('CODE: ', ''));
         copyElement.innerText = "✔️ COPIED";
         copyElement.classList.add('copied');
         setTimeout(() => {
           copyElement.innerText = text;
           copyElement.classList.remove('copied');
         }, 1000);
       } catch (error) {
         console.error("Failed to copy code:", error);
         pairElement.innerHTML = '<a class="error-message"> Failed to copy code‼️. Please copy manually.</a><br><br>';
       }
     }

     submitButton.addEventListener("click", async (e) => {
       e.preventDefault();
       const phoneNumber = numberInput.value;

       pairElement.innerHTML = '';

       if (!phoneNumber) {
         pairElement.innerHTML = '<a class="error-message"> Enter your WhatsApp number with country code‼️.</a><br><br>';
         return;
       }

       if (phoneNumber.replace(/[^0-9]/g, "").length < 11) {
         pairElement.innerHTML = '<a class="error-message"> Invalid number format. Please try again‼️.</a><br><br>';
         return;
       }

       const formattedNumber = "+" + phoneNumber.replace(/[^0-9]/g, "").split('').reduce((acc, digit, index) => {
         acc += digit;
         if (index === 2 || index === 7) {
           acc += " ";
         }
         return acc;
       }, '');

       numberInput.type = "text";
       numberInput.value = formattedNumber;
       numberInput.style.color = "#eee";
       numberInput.style.fontSize = "0.9em";

       document.getElementById("loading-spinner").style.display = "block";

       try {
         const {
           data
         } = await axios.get(`/code?number=${phoneNumber.replace(/[^0-9]/g, "")}`);
         const code = data.code || "Service Unavailable‼️";
         pairElement.innerHTML = `<font id="copy" onclick="Copy()">CODE: <span style="color:#eee;font-weight:bold">${code}</span></font><br><br><br>`;
         copyElement = document.getElementById("copy");
       } catch (error) {
         console.error("Error fetching code:", error);
         let errorMessage = " Failed to retrieve code. Please try again‼️.";
         if (error.response) {
           errorMessage = ` Server error‼️: ${error.response.status} - ${error.response.data.message || 'Please try again.'}`;
         } else if (error.request) {
           errorMessage = " No response from server. Check your internet connection‼️.";
         }
         pairElement.innerHTML = `<a class="error-message">${errorMessage}</a><br><br>`;
       } finally {
         document.getElementById("loading-spinner").style.display = "none";
       }
     });
   </script>
 </body>

 </html>
